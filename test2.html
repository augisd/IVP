<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="d3.js"></script>
	<title></title>
</head>
<body>
	<div id="option">
	    <input name="updateButton" 
	           type="button" 
	           value="All" 
	           />
	    <input name="updateButton" 
	           type="button" 
	           value="Rockets"
	            
	           />
	    <input name="updateButton" 
	           type="button" 
	           value="Warriors"
	           id="Rockets" 
	           />
	</div>
	<script type="text/javascript">
			
			// Define variables
			var body = d3.select('body'),
			    h = 900,
				w = 900,
				formatPercent = d3.format('.2%'),
				basketCoord = [10,50],
				i = 0,
				plotData = []
			
			// Define line
			var line = d3.line().curve(d3.curveBundle.beta(0.95))

			// Define svg canvas
			var svgContainer = body.append('svg')
				.attr('height', h)
				.attr('width', w)

			// Load the data
			d3.csv("/data/warriors.csv").then(function(data) {
			data.forEach(function(d) { d['LOC_Y'] = +d['LOC_Y'],
						  			   d['LOC_X'] = +d['LOC_X']; });


			// Define X and Y scales
			var xScale = d3.scaleLinear()
				.domain([d3.min(data, function (d) {return d.LOC_X - 50;}),
						 d3.max(data, function (d) {return d.LOC_X + 50;})])
				.range([0, w]);

			var yScale = d3.scaleLinear()
				.domain([d3.min(data, function (d) {return -d.LOC_Y;}),
						 d3.max(data, function (d) {return -d.LOC_Y + 250;})])
				.range([h, 0]);

			var splines = svgContainer.selectAll('path')
				.data(data)
				.enter()
				.append('path')
					.attr('d', function(d){
					return 	line([[xScale(d.LOC_X), yScale(-d.LOC_Y)],
								  [xScale(d.LOC_X), yScale(-d.LOC_Y + 200)],
								  [xScale(0), yScale(200)],
								  [xScale(0), yScale(100)]])})
					.attr("stroke", "black")
                    .attr("stroke-width", 0.75)
                    .attr("fill", "none")
                    .attr("opacity", 0.2)
                    .attr("stroke-dasharray", function(){
						var length = this.getTotalLength();
						return length + " " + length;
					})
					.attr("stroke-dashoffset", function(){
						var length = this.getTotalLength();
						return length;
					})
					.transition()
						.duration(5000)
						.attr("stroke-dashoffset", 0)

            function update(id) {
            	svgContainer.selectAll('path')
				.data(data.filter(function (d) {
					return d.TEAM_ID == id;
				}))
				.enter()
				.append('path')
					.attr('d', function(d){
					return 	line([[xScale(d.LOC_X), yScale(-d.LOC_Y)],
								  [xScale(d.LOC_X), yScale(-d.LOC_Y + 200)],
								  [xScale(0), yScale(200)],
								  [xScale(0), yScale(100)]])})
					.attr("stroke", "black")
                    .attr("stroke-width", 0.75)
                    .attr("fill", "none")
                    .attr("opacity", 0.1)
                .exit().remove()
            }
		});
	</script>

</body>
</html>