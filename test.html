<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="d3.js"></script>
	<title></title>
</head>
<body>
	<script type="text/javascript">
		var data = d3.csv("/data/rockets.csv").then(function(data) {
			data.forEach(function(d) { d['NEW_Y'] = +d['NEW_Y'],
						  			   d['LOC_X'] = +d['LOC_X']; 

									}); 

			// Variables
			var body = d3.select('body')
			var h = 500
			var w = 950
			var formatPercent = d3.format('.2%')
			var basketCoord = [10,50]
			var i = 0
			var plotData = []
			var splinedata = []

			// Scales
			var xScale = d3.scaleLinear()
				.domain([d3.min(data, function (d) {return d.NEW_Y - 50;}),
						 d3.max(data, function (d) {return d.NEW_Y + 50;})])
				.range([0, w]);

			var yScale = d3.scaleLinear()
				.domain([d3.min(data, function (d) {return d.LOC_X - 50;}),
						 d3.max(data, function (d) {return d.LOC_X + 150;})])
				.range([h, 0]);
			
			//Create spline data 
			data.forEach(function(d) {
				splinedata.push([[xScale(d.NEW_Y), yScale(d.LOC_X)],
								  [xScale(d.NEW_Y), yScale(d.LOC_X + 150)],
								  [xScale(0), yScale(150)],
								  [xScale(0), yScale(100)]])
			})
			console.log(splinedata)

			// SVG
			var svgContainer = body.append('svg')
				.attr('height', h)
				.attr('width', w)

			var line = d3.line().curve(d3.curveBundle.beta(0.95))

			var splines = svgContainer.selectAll('path')
				.data(splinedata)
				.enter()
				.append('path')
					.attr('d', function(d){return line(d)})
					.attr("stroke", "black")
                    .attr("stroke-width", 1)
                    .attr("fill", "none")
                    .attr("opacity", 0.2)

		/*	var lines = svgContainer.selectAll('line')
						.data(data)
						.enter()
						.append('line')
							.attr("x1", function(d) { return xScale(d.NEW_Y); })
				            .attr("y1", function(d) { return yScale(d.LOC_X); })
				            .attr("x2", function(d) { return xScale(d.NEW_Y); })
				            .attr("y2", function(d) { return yScale(d.LOC_X + 70); })
				            .attr("stroke", "black")
				            .attr("stroke-width", 1) ; */
		});
	</script>

</body>
</html>